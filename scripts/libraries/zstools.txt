class ZScriptTools
{
	// Calculate the intercept position for a projectile
	// Implementation of https://github.com/Realm667/WolfenDoom/issues/178#issuecomment-576599289
	static Vector3 GetInterceptPosition(Vector3 ShooterPos, Vector3 TargetPos, Vector3 TargetVel, double MissileSpeed)
	{
		Vector3 ShooterToTarget = LevelLocals.Vec3Diff(ShooterPos, TargetPos); // TargetPos - ShooterPos
		double a = (TargetVel.Length() * TargetVel.Length()) - (MissileSpeed * MissileSpeed);
		double b = ShooterToTarget dot TargetVel;
		double c = ShooterToTarget.Length() * ShooterToTarget.Length();
		double timeA = (-b + sqrt(b*b - a * c)) / a;
		double timeB = (-b - sqrt(b*b - a * c)) / a;
		return TargetPos + (TargetVel * max(timeA, timeB));
	}
}
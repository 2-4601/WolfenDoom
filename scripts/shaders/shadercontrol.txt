/*
	Shake shader control - shakes the screen based on the movement of an actor
	The amount the player has is the TID of the actor to check the speed of.
*/
class ShakeShaderControl : ShaderControl {
	Default {
		ShaderControl.Shader "shakeshader";
	}

	clearscope double FixedToDouble(int fixed) {
		return fixed / 65536.0;
	}

	override void SetUniforms(PlayerInfo p, RenderEvent e) {
		double speed = FixedToDouble(amount - 2);
		speed = speed / 4; // Make shake effect weaker
		Shader.SetUniform1f(p, ShaderToControl, "speed", speed);
	}
}

class OldVideoShaderControl : ShaderControl {
	Default {
		ShaderControl.Shader "oldvideoshader";
	}
}